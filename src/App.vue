<template>
  <div>
    <form class="search-form search-form--light input-group-lg mb-3">
      <input v-model="search" type="text" class="form-control" placeholder="Search icons">
      <button class="btn" type="button" role="button"><i class="material-icons">search</i></button>
    </form>

    <div class="card">
      <ul
        :class="navClass" 
        class="nav nav-tabs">
        <li 
          class="nav-item" 
          v-for="tab in tabs">
          <a 
            href="#" 
            class="nav-link"
            :class="{ 'active': tab.active === true }"
            role="tab" 
            aria-selected="true"
            @click.stop.prevent="setActive(tab)"
            v-html="tab.label"></a>
        </li>
      </ul>
      <div class="card-body">
        <keep-alive>
          <component 
            :is="libraryComponent" 
            :search="search"
            :material-icons-data-path="materialIconsDataPath"></component>
        </keep-alive>
      </div>
    </div>
  </div>
</template>

<script>
  import AppMaterialIcons from './AppMaterialIcons.vue'
  import AppFontAwesomeIcons from './AppFontAwesomeIcons.vue'

  export default {
    props: {
      navClass: {
        type: [String, Array, Object],
        default: null
      },
      materialIconsDataPath: {
        type: String,
        default: null
      }
    },
    data() {
      return {
        tabs: [{
          label: 'Material Icons',
          id: 'app-material-icons',
          active: true
        },{
          label: 'Font Awesome',
          id: 'app-font-awesome-icons',
          active: false
        }],
        libraryComponent: null,
        search: ''
      }
    },
    mounted() {
      this.libraryComponent = this.activeTab.id
    },
    computed: {
      activeTab() {
        return this.tabs.find(tab => tab.active)
      }
    },
    components: {
      AppMaterialIcons,
      AppFontAwesomeIcons
    },
    methods: {
      setActive(tab) {
        this.tabs.forEach(t => {
          if (t.id !== tab.id) { 
            t.active = false
          }
        })
        tab.active = true
        this.libraryComponent = tab.id
      }
    }
  }
</script>